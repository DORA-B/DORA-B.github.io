---
title: vim usage
date: 2025-04-05
categories: [Environment]
tags: [vim]     # TAG names should always be lowercase
published: false
---

> Problem: I get a very old project that need to run in an old env that does not support vscode code server, so I have to learn how to use vim.

# Basic tutorial

```shell
vimtutor
```

[Here](https://vim.rtorr.com/) is an tutorial cheat sheet.

# Common cases

- h: left
- j: down
- k: up
- l: right

- v: visual mode
- aB: a block with {}

- a: insert (append) after cursor
- A: insert (append) at the end of the line

- Search and replace
  - n: repeat search in same direction
  - N: repeat search in the opposite direction 

- Tabs and Working with multiple files
  - `:e[dit] file`: edit a file in a new buffer.
  - `:bn[ext]`: go to the next buffer.
  - `:bp[revious]`: go to the previous buffer.
  - `:tabnew` or `:tabnew {page.words.file}`: open a file in a new tab
  - `gt` or `:tabn[ext]`: move to the next tab
  - `gT` or `:tabp[revious]`: move to the previous tab

## Workflow examples
**Some of the comb keys may not work well in tmux**
- 1. open multiple files in vim
```shell
vim linux-user/main.c target-arm/translate.c
```
- 2.use command to choose between them and do edit. 
`:e[dit] file` - edit a file in a new buffer
`:bn[ext]` - go to the next buffer
`:bp[revious]` - go to the previous buffer
`:bd[elete]` - delete a buffer (close a file)
`:b[uffer]#` - go to a buffer by index #
`:b[uffer] file` - go to a buffer by file
`:ls` or `:buffers` - list all open buffers

```shell
  1      "linux-user/main.c"            line 4 
  2 #    "target-arm/translate.c"       line 75
  3 %a   "tcg/tcg.h"                    line 309
```

- 3. Split the buffers and choose the one that is needed

| Action | Command |
| --- | --- |
| Vertical split | `:vsp filename` or `Ctrl-w v` |
| Horizontal split | `:sp filename` or `Ctrl-w s` |
| Move between splits | `Ctrl-w h/j/k/l` |
| Resize vertical split | `Ctrl-w >`, `Ctrl-w <` |
| Resize horizontal split | `Ctrl-w +`, `Ctrl-w -` |
| Close current split | `:q` or `Ctrl-w c` |

![split the vim windows](/commons/images/environment/vimsplitter.png)


- 4. find the definition and references
    - sudo apt install exuberant-ctags
    - From the root of the project `ctags -R .`

| Action | Shortcut |
| --- | --- |
| Jump to definition | `Ctrl-]` |
| Jump back | `Ctrl-T` |
| List possible matches (if multiple) | `g]` |